<!DOCTYPE html>
<head>
  <title>JD Projects</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-7ymO4nGrkm372HoSbq1OY2DP4pEZnMiA+E0F3zPr+JQQtQ82gQ1HPY3QIVtztVua" crossorigin="anonymous"></script>
    <style>
        @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css");
        .box-card-ad {
            width: 90%;
        }
        .box-center {
            margin-left: auto;
            margin-right: auto;
        }
        .card-container {
            display: flex;
            flex-wrap: wrap;
        }
        .cardp {
            flex: 0 0 auto;
            margin: 10px;
        }
        .tag {
            color: #ffffff;
            padding: 1px 5px;
            border-radius: 6px;
            font-size: 12px;
        }
        .card-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: white;
            border: none;
        }
        @font-face {
            font-family: 'Source Han Sans Serif';
            src: url('font/SourceHanSansSC-Regular-2.otf') format('opentype');
        }
        body {
            font-family: 'Source Han Sans Serif';
        }
        .text-right {
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="box-card-ad box-center">
        <ul class="list-group">
            <li class="list-group-item active" aria-current="true">
                <div class="d-flex justify-content-between align-items-center">
                  <span><a href="./#杰弟作品" class="text-light">杰弟作品</a></span>
                  <div class="text-right">
                    <a href="https://gitblock.cn/Users/1137327/My/PublishedProjects" class="text-light">
                      查看所有作品<span aria-hidden="true">&raquo;</span>
                    </a>
                  </div>
                </div>
            <li class="list-group-item" id="cardContainer">
            </li>
          </ul>
      </div>

      <script>
        // 读取 JSON 文件并生成卡片元素
        fetch('json/jdprojects.json')
          .then(response => response.json())
          .then(data => {
            // 循环遍历每一项数据并创建卡片元素
            var cardGroups = Math.ceil(data.length / 5); // 总共需要的 card-group div 数量
            var count = 0; // 记录已经创建的 card-group div 数量
            var index = 0; // 记录当前卡片的索引
            var cardGroup, cardContainer, card;
    
            while (count < cardGroups) {
              // 创建 card-group div
              cardGroup = document.createElement("div");
              cardGroup.className = "card-group box-center";
              cardContainer = document.getElementById("cardContainer");
              cardContainer.appendChild(cardGroup);
    
              // 每个 card-group div 最多包含 5 个卡片
              for (var i = 0; i < 5; i++) {
                if (index >= data.length) break; // 确保不超出卡片的数量
    
                // 从 JSON 数据中获取属性值
                var imgURL = data[index].img;
                var title = data[index].title;
                var url = data[index].url;
                var time = data[index].time;
                var tag = data[index].tag;
    
                // 创建卡片元素
                card = document.createElement("div");
                card.className = "card";
    
                // 创建卡片图片
                var img = document.createElement("img");
                img.src = imgURL;
                img.className = "card-img-top cardi";
                card.appendChild(img);
    
                // 创建卡片内容
                var cardBody = document.createElement("div");
                cardBody.className = "card-body";
                card.appendChild(cardBody);
    
                // 创建卡片标题
                var cardTitle = document.createElement("h5");
                cardTitle.className = "card-title";
                cardTitle.innerText = title;
                cardBody.appendChild(cardTitle);
                var cardTitlebr = document.createElement("br");
                cardBody.appendChild(cardTitlebr);
    
                // 创建卡片底部
                var cardFooter = document.createElement("div");
                cardFooter.className = "card-footer";
                cardBody.appendChild(cardFooter);
    
                // 创建卡片链接
                var link = document.createElement("a");
                link.className = "card-text";
                link.href = url;
                link.innerText = "现在就去！";
                cardFooter.appendChild(link);
    
                // 创建卡片时间信息
                var timeInfo = document.createElement("p");
                timeInfo.className = "card-text";
                var smallText = document.createElement("small");
                smallText.className = "text-muted";
                smallText.innerText = "上次更新 " + time;
                timeInfo.appendChild(smallText);
                cardFooter.appendChild(timeInfo);
    
                // 创建卡片标签
                var tagInfo = document.createElement("p");
                tagInfo.className = "card-text";
                tagInfo.innerText = tag;
                cardFooter.appendChild(tagInfo);
    
                // 将卡片元素添加到当前的 card-group div 中
                cardGroup.appendChild(card);
    
                index++; // 更新卡片索引
              }
    
              count++; // 更新 card-group div 计数
            }
          })
          .catch(error => console.log(error));
      </script>
</body>
</html>